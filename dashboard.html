<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>ExtrimerS Panel â€¢ Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/assets/dashboard.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand">
        <div class="brand-logo"></div>
        <span class="brand-name">ExtrimerS</span>
      </a>

      <div class="user-card">
        <div class="user-avatar" id="user-avatar">EX</div>
        <div class="user-meta">
          <strong id="user-name">Demo user</strong><br />
          <span class="user-saldo" id="user-saldo">Saldo: Rp0</span><br />
          <span class="user-role" id="user-role">Role: - â€¢ Level: -</span>
        </div>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="container">
      <div class="top-row">
        <span class="badge">
          API: <span id="api-label"></span>
        </span>
        <span class="badge small">
          Buka link dengan <code>?uid=USER_ID</code> untuk otomatis set user.
        </span>
      </div>

      <!-- TAB NAV -->
      <div class="tab-nav">
        <button class="tab-btn active" data-tab="overview">
          <span class="icon">ðŸ“Š</span> Overview
        </button>
        <button class="tab-btn" data-tab="create">
          <span class="icon">ðŸ§¾</span> Buat Akun
        </button>
        <!-- siapin tab top up nanti -->
        <button class="tab-btn" data-tab="coming">
          <span class="icon">ðŸ’³</span> Top Up (soon)
        </button>
      </div>

      <div class="layout-grid">
        <!-- KIRI: CONTENT (switch tab) -->
        <section id="tab-overview" class="card">
          <h2><span class="icon">ðŸ“Š</span> Ringkasan</h2>
          <p class="subtitle">
            Statistik singkat aktivitas akun & server kamu. Data diambil dari API ketika tersedia.
          </p>
          <div class="divider"></div>

          <div class="stats-grid">
            <article class="stat-card">
              <div class="stat-label">
                <span>Total Order</span>
                <span class="icon">ðŸ§¾</span>
              </div>
              <div class="stat-value" id="stat-order-count">0</div>
              <div class="stat-sub">
                Total pengeluaran: <span id="stat-order-spent">Rp0</span>
              </div>
            </article>

            <article class="stat-card">
              <div class="stat-label">
                <span>Total Top Up</span>
                <span class="icon">ðŸ’³</span>
              </div>
              <div class="stat-value" id="stat-topup-count">0</div>
              <div class="stat-sub">
                Nominal masuk: <span id="stat-topup-amount">Rp0</span>
              </div>
            </article>

            <article class="stat-card">
              <div class="stat-label">
                <span>Server Aktif</span>
                <span class="icon">ðŸ“¡</span>
              </div>
              <div class="stat-value" id="stat-server-count">0</div>
              <div class="stat-sub">
                Akun terbuat: <span id="stat-server-akun">0</span>
              </div>
            </article>
          </div>

          <div class="divider"></div>

          <div class="activity">
            <h3>Aktivitas terbaru (contoh tampilan)</h3>
            <div class="activity-row">
              <div>
                <div class="activity-main">VMESS â€¢ SG2</div>
                <div class="activity-sub">User: extrimers01 â€¢ 30 hari</div>
              </div>
              <div class="activity-amount">- Rp20.000</div>
            </div>
            <div class="activity-row">
              <div>
                <div class="activity-main">Top Up saldo</div>
                <div class="activity-sub">QRIS â€¢ 50.000</div>
              </div>
              <div class="activity-amount positive">+ Rp50.000</div>
            </div>
          </div>
        </section>

        <section id="tab-create" class="card" style="display:none;">
          <h2><span class="icon">ðŸ§¾</span> Buat Akun Premium</h2>
          <p class="subtitle">
            Pilih server & protokol, lalu isi username. Saldo user (di backend) akan dipotong otomatis kalau cukup.
          </p>
          <div class="divider"></div>

          <div class="pill-row">
            <span class="pill strong">Akun berbayar</span>
            <span class="pill">Trial & top up bisa ditambah belakangan</span>
          </div>

          <label>Protokol</label>
          <div class="proto-row" id="proto-row">
            <button class="proto-btn active" data-proto="vmess">VMESS</button>
            <button class="proto-btn" data-proto="vless">VLESS</button>
            <button class="proto-btn" data-proto="trojan">TROJAN</button>
            <button class="proto-btn" data-proto="ssh">SSH</button>
          </div>

          <div class="field">
            <label for="server-select">Server</label>
            <select id="server-select">
              <option value="">Pilih serverâ€¦</option>
            </select>
            <div class="note">Daftar server diambil dari <code>/api/web/servers</code>.</div>
          </div>

          <div class="field">
            <label for="username">Username</label>
            <input id="username" type="text" placeholder="contoh: extrimers01" />
            <div class="note">Hanya huruf & angka, 3â€“20 karakter.</div>
          </div>

          <div class="field" id="field-password">
            <label for="password">Password SSH</label>
            <input id="password" type="text" placeholder="Hanya dipakai untuk SSH" />
          </div>

          <div class="field">
            <label for="days">Durasi (hari)</label>
            <select id="days">
              <option value="7">7 Hari</option>
              <option value="15">15 Hari</option>
              <option value="30" selected>30 Hari</option>
            </select>
          </div>

          <div class="field">
            <label for="user-id">User ID backend</label>
            <input id="user-id" type="number" value="123456789" />
            <div class="note" id="user-id-note">
              Kalau URL pakai <code>?uid=</code>, field ini akan diisi & dikunci otomatis.
            </div>
          </div>

          <button class="btn primary" id="btn-create">
            ðŸš€ Buat Akun
          </button>

          <div id="create-status" class="note"></div>

          <div class="divider"></div>

          <div class="result-header">
            <span>Ringkasan akun</span>
            <button class="copy-btn" id="btn-copy-config">Copy config</button>
          </div>
          <div class="result-table">
            <div class="result-row">
              <span class="key">Status</span><span id="res-status">Belum ada permintaan.</span>
            </div>
            <div class="result-row">
              <span class="key">Protokol</span><span id="res-proto">-</span>
            </div>
            <div class="result-row">
              <span class="key">Server</span><span id="res-server">-</span>
            </div>
            <div class="result-row">
              <span class="key">Durasi</span><span id="res-days">-</span>
            </div>
            <div class="result-row">
              <span class="key">Harga</span><span id="res-price">Rp0</span>
            </div>
            <div class="result-row">
              <span class="key">Komisi</span><span id="res-komisi">Rp0</span>
            </div>
          </div>

          <textarea id="res-config" readonly>
Config / detail akun akan muncul di sini setelah request sukses.</textarea>
        </section>

        <section id="tab-coming" class="card" style="display:none;">
          <h2><span class="icon">ðŸ’³</span> Top Up dari Web</h2>
          <p class="subtitle">
            Desain tab ini sudah siap. Nanti tinggal disambungkan ke endpoint
            <code>/api/web/topup</code> ketika backend sudah ready.
          </p>
          <div class="divider"></div>
          <p class="note">
            Untuk sekarang, gunakan menu top up di bot Telegram. Begitu API
            top up web sudah siap, tab ini yang akan kita hidupkan duluan. ðŸ˜Ž
          </p>
        </section>

        <!-- KANAN: SERVER LIST -->
        <section class="card">
          <h2><span class="icon">ðŸ“¡</span> Server Tersedia</h2>
          <p class="subtitle">
            Data diambil dari <code>/api/web/servers</code>. Tap salah satu server untuk memilihnya di tab "Buat Akun".
          </p>
          <div class="divider"></div>
          <div id="servers-grid" class="servers-grid">
            <p class="note">Memuat list serverâ€¦</p>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <span>ExtrimerS Tunneling Panel</span>
      <span class="muted small">Dashboard â€¢ powered by backend API yang sama dengan bot</span>
    </div>
  </footer>

  <script src="/assets/dashboard.js"></script>
</body>
</html>
