<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>TunXtrimer VPN Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #020617, #020617 40%, #020617 100%);
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }
    .wrapper {
      width: 100%;
      max-width: 960px;
      background: rgba(15,23,42,0.95);
      border-radius: 24px;
      padding: 22px 20px;
      border: 1px solid rgba(148,163,184,0.35);
      box-shadow: 0 20px 60px rgba(0,0,0,0.85);
      backdrop-filter: blur(18px);
    }
    @media (max-width: 768px) {
      .wrapper {
        padding: 18px 14px;
        border-radius: 20px;
      }
    }
    .header {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 18px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(34,197,94,0.12);
      border: 1px solid rgba(34,197,94,0.5);
      color: #4ade80;
      width: fit-content;
    }
    .title {
      font-size: 22px;
      font-weight: 700;
      color: #f9fafb;
    }
    .subtitle {
      font-size: 13px;
      color: #9ca3af;
      max-width: 580px;
    }
    .grid {
      display: grid;
      grid-template-columns: minmax(0, 1.8fr) minmax(0, 1.3fr);
      gap: 18px;
    }
    @media (max-width: 780px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
    .card {
      background: rgba(15,23,42,0.9);
      border-radius: 18px;
      padding: 16px 14px 18px;
      border: 1px solid rgba(55,65,81,0.9);
    }
    .card h2 {
      font-size: 15px;
      margin-bottom: 8px;
      font-weight: 600;
    }
    .card p {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 12px;
    }
    .form-group {
      margin-bottom: 10px;
    }
    label {
      font-size: 12px;
      color: #e5e7eb;
      display: block;
      margin-bottom: 4px;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(55,65,81,0.9);
      background: rgba(15,23,42,0.96);
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
      transition: border 0.15s, box-shadow 0.15s, background 0.15s;
    }
    input::placeholder, textarea::placeholder {
      color: #6b7280;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(129,140,248,0.7);
      background: #020617;
    }
    textarea {
      resize: vertical;
      min-height: 60px;
      max-height: 120px;
    }
    .btn {
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 10px 14px;
      margin-top: 4px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      background: linear-gradient(135deg, #6366f1, #22c55e);
      color: white;
      box-shadow: 0 12px 30px rgba(79,70,229,0.5);
      transition: transform 0.1s, box-shadow 0.1s, filter 0.1s;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 7px 20px rgba(79,70,229,0.45);
      filter: brightness(0.96);
    }
    .btn[disabled] {
      opacity: 0.6;
      cursor: not-allowed;
      box-shadow: none;
    }
    .alert {
      font-size: 12px;
      border-radius: 999px;
      padding: 7px 11px;
      margin-top: 8px;
      display: none;
    }
    .alert.success {
      background: rgba(22,163,74,0.15);
      color: #4ade80;
      border: 1px solid rgba(22,163,74,0.5);
    }
    .alert.error {
      background: rgba(220,38,38,0.15);
      color: #fca5a5;
      border: 1px solid rgba(220,38,38,0.5);
    }
    .pill {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(55,65,81,0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34,197,94,0.25);
    }
    .stats {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin: 10px 0 12px;
    }
    .stat-card {
      border-radius: 14px;
      padding: 9px 10px;
      background: radial-gradient(circle at top left, rgba(129,140,248,0.13), rgba(15,23,42,0.95));
      border: 1px solid rgba(55,65,81,0.9);
      font-size: 11px;
    }
    .stat-label {
      color: #9ca3af;
      margin-bottom: 4px;
    }
    .stat-value {
      font-size: 16px;
      font-weight: 700;
      color: #e5e7eb;
    }
    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      margin-bottom: 8px;
    }
    .chip {
      font-size: 11px;
      padding: 4px 7px;
      border-radius: 999px;
      border: 1px solid rgba(75,85,99,0.95);
      color: #9ca3af;
    }
    .proto {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .proto span {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(75,85,99,0.9);
    }
    .footer {
      margin-top: 14px;
      padding-top: 10px;
      border-top: 1px solid rgba(31,41,55,0.9);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 11px;
      color: #6b7280;
    }
    .footer a {
      color: #a5b4fc;
      text-decoration: none;
    }
    .footer a:hover {
      text-decoration: underline;
    }
    /* Pricing Section */
    .pricing-grid {
      margin-top: 8px;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
    }
    @media (max-width: 900px) {
      .pricing-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (max-width: 600px) {
      .pricing-grid {
        grid-template-columns: 1fr;
      }
    }
    .price-card {
      background: radial-gradient(circle at top left, rgba(15,23,42,0.96), rgba(15,23,42,0.9));
      border-radius: 16px;
      padding: 10px 11px 12px;
      border: 1px solid rgba(55,65,81,0.9);
      font-size: 12px;
      position: relative;
    }
    .price-card-hot {
      border-color: rgba(56,189,248,0.9);
      box-shadow: 0 14px 35px rgba(56,189,248,0.25);
    }
    .price-badge {
      position: absolute;
      right: 9px;
      top: 8px;
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      background: #38bdf8;
      color: #0f172a;
      font-weight: 600;
    }
    .price-title {
      font-weight: 600;
      margin-bottom: 2px;
    }
    .price-value {
      font-size: 15px;
      font-weight: 700;
      color: #a5b4fc;
      margin-bottom: 6px;
    }
    .price-list {
      list-style: none;
      margin-bottom: 8px;
      padding-left: 0;
      color: #9ca3af;
    }
    .price-list li {
      margin-bottom: 2px;
    }
    .price-btn {
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(75,85,99,0.9);
      background: rgba(15,23,42,0.95);
      color: #e5e7eb;
      padding: 6px 8px;
      font-size: 12px;
      cursor: pointer;
      transition: 0.12s;
    }
    .price-btn:hover {
      border-color: #6366f1;
      box-shadow: 0 6px 16px rgba(79,70,229,0.45);
    }
  </style>
</head>
<body>
<div class="wrapper">
  <div class="header">
    <div class="badge">
      <span>âš¡</span>
      <span id="store-name">TunXtrimer VPN Store</span>
    </div>
    <div class="title">Internet Lancar untuk Game, Streaming & Harian</div>
    <div class="subtitle">
      SSH â€¢ VMESS â€¢ VLESS â€¢ TROJAN premium, auto terhubung ke bot Telegram. Isi data di bawah, admin/bot
      akan proses dan kirim info pembayaran.
    </div>
  </div>

  <div class="grid">
    <!-- FORM -->
    <div class="card">
      <h2>Form Order</h2>
      <p>Masukkan email/kontak dan password bebas untuk identitas akun VPN kamu.</p>

      <form id="order-form">
        <div class="form-group">
          <label for="email">Email / Kontak</label>
          <input
            type="text"
            id="email"
            name="email"
            placeholder="email@domain.com / @username / No.WA"
            required
          />
        </div>

        <div class="form-group">
          <label for="password">Password Bebas</label>
          <input
            type="text"
            id="password"
            name="password"
            placeholder="bebas, contoh: nama+angka"
            required
          />
        </div>

        <div class="form-group">
          <label for="paket">Paket</label>
          <select id="paket" name="paket">
            <option value="SSH 30 Hari">SSH 30 Hari</option>
            <option value="VMESS 30 Hari">VMESS 30 Hari</option>
            <option value="VLESS 30 Hari">VLESS 30 Hari</option>
            <option value="TROJAN 30 Hari">TROJAN 30 Hari</option>
            <option value="Combo All Protocol 30 Hari">Combo All Protocol 30 Hari</option>
          </select>
        </div>

        <div class="form-group">
          <label for="note">Catatan Tambahan (opsional)</label>
          <textarea
            id="note"
            name="note"
            placeholder="contoh: prioritas Telkomsel / untuk game / dsb"
          ></textarea>
        </div>

        <button type="submit" class="btn" id="submit-btn">
          <span>ðŸ›’ Kirim Order</span>
        </button>

        <div class="alert success" id="alert-success"></div>
        <div class="alert error" id="alert-error"></div>
      </form>
    </div>

    <!-- INFO BOT / STATUS -->
    <div class="card">
      <div class="pill">
        <div class="pill-dot"></div>
        <span>Bot Telegram Online</span>
      </div>

      <div class="stats">
        <div class="stat-card">
          <div class="stat-label">Total User Bot</div>
          <div class="stat-value" id="stat-users">-</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Server Aktif</div>
          <div class="stat-value" id="stat-servers">-</div>
        </div>
      </div>

      <h2>Keunggulan</h2>
      <div class="chips">
        <span class="chip">ðŸ”’ Enkripsi full</span>
        <span class="chip">ðŸš€ Anti lemot</span>
        <span class="chip">ðŸ“² Support semua operator</span>
        <span class="chip">ðŸ¤– Integrasi bot Telegram</span>
      </div>

      <div class="proto">
        <span>SSH</span>
        <span>VMESS</span>
        <span>VLESS</span>
        <span>TROJAN</span>
      </div>

      <p style="margin-top: 10px; font-size: 12px;">
        Setelah order terkirim, cek pesan dari bot/admin untuk detail pembayaran & akun.
      </p>
    </div>
  </div>
<!-- SEKSI PAKET & HARGA -->
  <div style="margin-top: 22px;">
    <h2 style="font-size: 16px; margin-bottom: 4px;">Paket & Harga</h2>
    <p style="font-size: 12px; color: #9ca3af; margin-bottom: 10px;">
      Pilih paket sesuai kebutuhan kamu, lalu klik untuk otomatis mengisi form.
    </p>

    <div class="pricing-grid">
      <div class="price-card" data-paket-card="SSH 30 Hari">
        <div class="price-title">SSH 30 Hari</div>
        <div class="price-value">Rp 15.000</div>
        <ul class="price-list">
          <li>Server Premium ID/SG</li>
          <li>Support Game & Harian</li>
          <li>Unlimited (FUP wajar)</li>
        </ul>
        <button class="price-btn">Pilih Paket Ini</button>
      </div>

      <div class="price-card price-card-hot" data-paket-card="VMESS 30 Hari">
        <div class="price-badge">Favorit</div>
        <div class="price-title">VMESS 30 Hari</div>
        <div class="price-value">Rp 20.000</div>
        <ul class="price-list">
          <li>Latency rendah</li>
          <li>Support TLS / WS</li>
          <li>Cocok streaming & social media</li>
        </ul>
        <button class="price-btn">Pilih Paket Ini</button>
      </div>

      <div class="price-card" data-paket-card="VLESS 30 Hari">
        <div class="price-title">VLESS 30 Hari</div>
        <div class="price-value">Rp 20.000</div>
        <ul class="price-list">
          <li>Lebih ringan & stabil</li>
          <li>Support SNI / Bug Host</li>
          <li>Cocok opok</li>
        </ul>
        <button class="price-btn">Pilih Paket Ini</button>
      </div>

      <div class="price-card" data-paket-card="TROJAN 30 Hari">
        <div class="price-title">TROJAN 30 Hari</div>
        <div class="price-value">Rp 25.000</div>
        <ul class="price-list">
          <li>Enkripsi kuat</li>
          <li>Stabil & kencang</li>
          <li>Support multi device</li>
        </ul>
        <button class="price-btn">Pilih Paket Ini</button>
      </div>
    </div>
  </div>
  <div class="footer">
    <span>Â© <span id="year"></span> TunXtrimer VPN Store</span>
    <span>Order via bot: <a href="#" id="bot-link">@BotVPNAnda</a></span>
  </div>
</div>

<script>
  const yearEl = document.getElementById('year');
  const statUsersEl = document.getElementById('stat-users');
  const statServersEl = document.getElementById('stat-servers');
  const storeNameEl = document.getElementById('store-name');
  const botLinkEl = document.getElementById('bot-link');
  const alertSuccess = document.getElementById('alert-success');
  const alertError = document.getElementById('alert-error');
  const submitBtn = document.getElementById('submit-btn');

  yearEl.textContent = new Date().getFullYear();

  function showAlert(type, message) {
    const target = type === 'success' ? alertSuccess : alertError;
    const other = type === 'success' ? alertError : alertSuccess;
    other.style.display = 'none';
    target.textContent = message;
    target.style.display = 'block';
  }
// Klik kartu paket -> set dropdown paket + scroll ke form
  function initPricingSelect() {
    const paketSelect = document.getElementById('paket');
    const formEl = document.getElementById('order-form');
    
    document.querySelectorAll('[data-paket-card]').forEach(card => {
      const paketName = card.getAttribute('data-paket-card');
      const btn = card.querySelector('.price-btn');
      if (!btn) return;

      btn.addEventListener('click', () => {
        paketSelect.value = paketName;
        formEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });
  }
  initPricingSelect();
  async function loadStatus() {
    try {
      const res = await fetch('/api/web/status');
      if (!res.ok) return;
      const data = await res.json().catch(() => ({}));
      if (data && data.ok) {
        if (data.store) {
          storeNameEl.textContent = data.store + ' VPN Store';
        }
        statUsersEl.textContent = (data.totalUser || 0).toLocaleString('id-ID');
        statServersEl.textContent = (data.totalServer || 0).toLocaleString('id-ID');
        if (data.botLink) {
          botLinkEl.textContent = data.botLink;
          botLinkEl.href = 'https://t.me/' + data.botLink.replace('@', '');
        }
      }
    } catch (e) {
      // boleh diabaikan kalau error
    }
  }
  loadStatus();

  document.getElementById('order-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    alertSuccess.style.display = 'none';
    alertError.style.display = 'none';

    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value.trim();
    const paket = document.getElementById('paket').value;
    const note = document.getElementById('note').value.trim();

    if (!email || !password) {
      showAlert('error', 'Email/kontak dan password wajib diisi.');
      return;
    }

    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Mengirim order...';

    try {
      const res = await fetch('/api/web/order', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password, paket, note })
      });

      const data = await res.json().catch(() => ({}));

      if (res.ok && data.ok) {
  let msg = data.message || 'Order berhasil dikirim, silakan cek Telegram.';

  if (data.orderId) {
    msg += ` ID Order: ${data.orderId}.`;
  }

  if (data.botLink) {
    msg += ` <br>ðŸ‘‰ <a href="${data.botLink}" target="_blank" rel="noopener noreferrer">Klik di sini untuk chat dengan bot.</a>`;
  }

  // pakai innerHTML biar link bisa diklik
  alertSuccess.innerHTML = msg;
  alertSuccess.style.display = 'block';
  alertError.style.display = 'none';

  document.getElementById('order-form').reset();
} else {
  showAlert('error', data.message || 'Gagal mengirim order, coba lagi.');
}
    } catch (err) {
      showAlert('error', 'Terjadi kesalahan koneksi, coba lagi.');
    } finally {
      submitBtn.disabled = false;
      submitBtn.innerHTML = '<span>ðŸ›’ Kirim Order</span>';
    }
  });
</script>
</body>
</html>
