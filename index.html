<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>ExtrimerS Tunneling - Panel Reseller</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #020617 0, #020617 40%, #000 100%);
      color: #e5e7eb;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .container {
      max-width: 1180px;
      margin: 0 auto;
      padding: 16px;
    }

    /* HEADER */
    header {
      padding: 6px 0 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    header h1 {
      margin: 0;
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .brand-pill {
      font-size: 0.7rem;
      padding: 4px 10px;
      border-radius: 999px;
      background: linear-gradient(to right, #22c55e, #06b6d4);
      color: #020617;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 700;
    }
    header small {
      font-size: 0.75rem;
      color: #9ca3af;
      display: block;
    }

    .user-card {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, #1f2937, #020617);
      border: 1px solid #1f2937;
    }
    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: conic-gradient(from 160deg, #22c55e, #06b6d4, #3b82f6, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      color: #020617;
      font-weight: 700;
    }
    .user-meta {
      font-size: 0.75rem;
      line-height: 1.3;
    }
    .user-meta strong {
      font-size: 0.82rem;
    }
    .user-saldo {
      font-size: 0.78rem;
      font-weight: 600;
      color: #bbf7d0;
    }
    .user-role {
      font-size: 0.72rem;
      color: #9ca3af;
    }

    .badge-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .badge {
      font-size: 0.7rem;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid #1f2937;
      color: #9ca3af;
    }
    .badge code {
      font-size: 0.7rem;
      background: #020617;
      padding: 2px 5px;
      border-radius: 6px;
    }

    /* TABS MAIN */
    .tab-nav {
      display: inline-flex;
      border-radius: 999px;
      padding: 3px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid #1f2937;
      gap: 4px;
      margin-bottom: 12px;
    }
    .tab-btn {
      border: none;
      background: transparent;
      color: #9ca3af;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 0.78rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .tab-btn span.icon {
      font-size: 0.9rem;
    }
    .tab-btn.active {
      background: linear-gradient(to right, #22c55e, #06b6d4);
      color: #020617;
      font-weight: 600;
    }

    /* GRID */
    .main-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.3fr);
      gap: 18px;
    }
    @media (max-width: 900px) {
      .main-grid {
        grid-template-columns: minmax(0, 1fr);
      }
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      .user-card {
        width: 100%;
        justify-content: space-between;
      }
    }

    /* CARDS BASE */
    .card {
      background: radial-gradient(circle at top, #111827, #020617);
      border-radius: 14px;
      padding: 14px 14px 12px;
      border: 1px solid #111827;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.8);
    }
    .card h2 {
      margin: 0 0 4px;
      font-size: 1.02rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .card h2 span.icon {
      font-size: 1.1rem;
    }
    .card-subtitle {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 8px;
    }
    .divider {
      height: 1px;
      background: linear-gradient(to right, transparent, #1f2937, transparent);
      margin: 8px 0 10px;
    }

    /* DASHBOARD STATS */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 10px;
    }
    .stat-card {
      border-radius: 10px;
      padding: 10px 11px;
      background: linear-gradient(135deg, #020617, #0b1120);
      border: 1px solid #1f2937;
      font-size: 0.8rem;
    }
    .stat-label {
      color: #9ca3af;
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .stat-label span.icon {
      font-size: 0.9rem;
    }
    .stat-value {
      font-size: 1.1rem;
      font-weight: 600;
    }
    .stat-sub {
      font-size: 0.7rem;
      color: #6b7280;
      margin-top: 2px;
    }

    .list-activity {
      margin-top: 10px;
      font-size: 0.78rem;
    }
    .activity-row {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid rgba(31,41,55,0.7);
    }
    .activity-row:last-child {
      border-bottom: none;
    }
    .activity-main {
      color: #e5e7eb;
    }
    .activity-sub {
      color: #9ca3af;
      font-size: 0.72rem;
    }
    .activity-amount {
      font-weight: 600;
      font-size: 0.8rem;
    }

    /* SERVER LIST */
    .servers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 9px;
    }
    .server-card {
      border-radius: 11px;
      padding: 10px;
      background: linear-gradient(to bottom right, #020617, #020617, #0b1120);
      border: 1px solid #1f2937;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
      font-size: 0.78rem;
    }
    .server-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 22px rgba(15,23,42,0.9);
      border-color: #22c55e;
    }
    .server-card.selected {
      border-color: #22c55e;
      box-shadow: 0 0 0 1px rgba(34,197,94,0.5);
    }
    .server-name {
      font-weight: 600;
      margin-bottom: 2px;
    }
    .server-location {
      color: #9ca3af;
      margin-bottom: 6px;
      font-size: 0.74rem;
    }
    .server-meta {
      color: #9ca3af;
      line-height: 1.4;
    }
    .server-status {
      margin-top: 5px;
      font-size: 0.72rem;
      font-weight: 600;
    }
    .status-ok {
      color: #22c55e;
    }
    .status-full {
      color: #ef4444;
    }

    /* FORM & INPUT */
    label {
      display: block;
      font-size: 0.76rem;
      color: #9ca3af;
      margin-bottom: 3px;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      outline: none;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #22c55e;
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.35);
    }
    .field {
      margin-bottom: 9px;
      font-size: 0.78rem;
    }
    .note {
      font-size: 0.72rem;
      color: #9ca3af;
      margin-top: 3px;
    }
    textarea {
      min-height: 120px;
      resize: vertical;
      font-size: 0.76rem;
      white-space: pre-wrap;
    }

    /* PROTOCOL BUTTONS */
    .proto-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }
    .proto-btn {
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      font-size: 0.76rem;
      padding: 5px 10px;
      cursor: pointer;
      color: #9ca3af;
    }
    .proto-btn.active {
      background: linear-gradient(to right, #22c55e, #06b6d4);
      color: #020617;
      font-weight: 600;
      border-color: transparent;
    }

    /* BUTTONS */
    button.primary {
      width: 100%;
      padding: 10px 12px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      background: linear-gradient(to right, #22c55e, #06b6d4);
      color: #020617;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-size: 0.85rem;
      margin-top: 4px;
    }
    button.primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .copy-btn {
      font-size: 0.7rem;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      cursor: pointer;
    }
    .copy-btn:hover {
      border-color: #22c55e;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 7px;
    }
    .pill {
      font-size: 0.72rem;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #9ca3af;
    }
    .pill-strong {
      color: #e5e7eb;
      font-weight: 600;
    }

    /* TOPUP QUICK */
    .topup-quick {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .topup-chip {
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      font-size: 0.74rem;
      padding: 4px 8px;
      cursor: pointer;
      color: #9ca3af;
    }
    .topup-chip:hover {
      border-color: #22c55e;
      color: #e5e7eb;
    }

    /* RESULT TABLE */
    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin: 8px 0 4px;
      font-size: 0.8rem;
      color: #9ca3af;
    }
    .result-table {
      font-size: 0.76rem;
      border-radius: 10px;
      border: 1px solid #1f2937;
      background: #020617;
      padding: 7px 9px;
      margin-bottom: 8px;
    }
    .result-row {
      display: flex;
      justify-content: space-between;
      margin: 2px 0;
    }
    .result-row span.key {
      color: #9ca3af;
    }

    /* QR */
    .qr-preview {
      display: block;
      max-width: 160px;
      border-radius: 8px;
      border: 1px solid #1f2937;
      margin-top: 6px;
    }

    /* STATES */
    .error {
      color: #fb923c;
      font-size: 0.78rem;
      margin-top: 4px;
    }
    .success {
      color: #22c55e;
      font-size: 0.78rem;
      margin-top: 4px;
    }

    footer {
      padding: 10px 16px 18px;
      text-align: center;
      font-size: 0.75rem;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HEADER -->
    <header>
      <div>
        <h1>
          <span>‚ö° ExtrimerS Tunneling</span>
          <span class="brand-pill">Reseller Panel</span>
        </h1>
        <small>Koneksi cepat & stabil ‚Ä¢ Sistem otomatis ‚Ä¢ Config langsung jadi</small>
      </div>
      <div class="user-card">
        <div class="user-avatar" id="user-avatar">EX</div>
        <div class="user-meta">
          <strong id="user-name">Demo User</strong><br />
          <span class="user-saldo" id="user-saldo">Saldo: Rp0</span><br />
          <span class="user-role" id="user-role">Role: Reseller ‚Ä¢ Level: Silver</span>
        </div>
      </div>
    </header>

    <div class="badge-row">
      <span class="badge">API: <span id="api-label">https://api.rmpremium.cloud</span></span>
      <span class="badge">Tip: kirim link dengan <code>?uid=USER_ID</code> agar saldo & data user otomatis.</span>
    </div>

    <!-- TABS -->
    <div class="tab-nav">
      <button class="tab-btn active" data-tab="dashboard">
        <span class="icon">üìä</span> Dashboard
      </button>
      <button class="tab-btn" data-tab="akun">
        <span class="icon">üßæ</span> Akun
      </button>
      <button class="tab-btn" data-tab="topup">
        <span class="icon">üí≥</span> Top Up
      </button>
    </div>

    <!-- MAIN GRID -->
    <div class="main-grid">
      <!-- KIRI: konten utama (switch by tab) -->
      <section id="tab-dashboard" class="card">
        <h2><span class="icon">üìä</span> Ringkasan</h2>
        <p class="card-subtitle">
          Pantau performa akun & saldo kamu. Data di bawah ini masih dummy untuk desain; nanti tinggal diisi dari API.
        </p>
        <div class="divider"></div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">
              <span>Total Order</span>
              <span class="icon">üßæ</span>
            </div>
            <div class="stat-value" id="stat-order-count">0</div>
            <div class="stat-sub">Total pengeluaran: <span id="stat-order-spent">Rp0</span></div>
          </div>
          <div class="stat-card">
            <div class="stat-label">
              <span>Top Up</span>
              <span class="icon">üí≥</span>
            </div>
            <div class="stat-value" id="stat-topup-count">0</div>
            <div class="stat-sub">Total top up: <span id="stat-topup-amount">Rp0</span></div>
          </div>
          <div class="stat-card">
            <div class="stat-label">
              <span>Server Aktif</span>
              <span class="icon">üì°</span>
            </div>
            <div class="stat-value" id="stat-server-count">0</div>
            <div class="stat-sub">Akun terbuat: <span id="stat-server-akun">0</span></div>
          </div>
        </div>

        <div class="list-activity">
          <div class="activity-row">
            <div>
              <div class="activity-main">VMESS ‚Ä¢ SG-1</div>
              <div class="activity-sub">User: extrimers01 ‚Ä¢ 30 hari</div>
            </div>
            <div class="activity-amount">- Rp20.000</div>
          </div>
          <div class="activity-row">
            <div>
              <div class="activity-main">Top Up Saldo</div>
              <div class="activity-sub">QRIS ‚Ä¢ 50.000</div>
            </div>
            <div class="activity-amount" style="color:#22c55e;">+ Rp50.000</div>
          </div>
          <div class="activity-row">
            <div>
              <div class="activity-main">SSH ‚Ä¢ ID-1</div>
              <div class="activity-sub">User: sshuser01 ‚Ä¢ 7 hari</div>
            </div>
            <div class="activity-amount">- Rp7.000</div>
          </div>
        </div>
      </section>

      <section id="tab-akun" class="card" style="display:none;">
        <h2><span class="icon">üßæ</span> Buat Akun</h2>
        <p class="card-subtitle">
          Pilih server dan protokol, lalu isi username. Saldo akan terpotong otomatis sesuai harga di backend.
        </p>
        <div class="divider"></div>

        <div class="pill-row">
          <span class="pill pill-strong">Mode Premium</span>
          <span class="pill">Log trial & free bisa ditambah nanti</span>
        </div>

        <label>Protokol</label>
        <div class="proto-row" id="proto-row">
          <button class="proto-btn active" data-proto="vmess">VMESS</button>
          <button class="proto-btn" data-proto="vless">VLESS</button>
          <button class="proto-btn" data-proto="trojan">TROJAN</button>
          <button class="proto-btn" data-proto="ssh">SSH</button>
        </div>

        <div class="field">
          <label for="server-select">Server</label>
          <select id="server-select">
            <option value="">Pilih server (dummy)</option>
          </select>
          <div class="note">Nanti select ini bisa diisi dari /api/web/servers.</div>
        </div>

        <div class="field">
          <label for="username">Username</label>
          <input id="username" type="text" placeholder="contoh: extrimers01" />
          <div class="note">Hanya huruf & angka, 3‚Äì20 karakter.</div>
        </div>

        <div class="field" id="field-password">
          <label for="password">Password SSH</label>
          <input id="password" type="text" placeholder="Hanya dipakai untuk SSH" />
        </div>

        <div class="field">
          <label for="days">Durasi (hari)</label>
          <select id="days">
            <option value="7">7 Hari</option>
            <option value="15">15 Hari</option>
            <option value="30" selected>30 Hari</option>
          </select>
        </div>

        <div class="field">
          <label for="user-id">User ID backend</label>
          <input id="user-id" type="number" value="123456789" />
          <div class="note">Nanti diisi otomatis dari ?uid= di URL.</div>
        </div>

        <button class="primary" id="btn-create">
          üöÄ Buat Akun (Dummy)
        </button>

        <div class="divider"></div>

        <div class="result-header">
          <span>Ringkasan Akun</span>
          <button class="copy-btn" id="btn-copy-config">Copy Config</button>
        </div>
        <div class="result-table">
          <div class="result-row">
            <span class="key">Status</span><span id="res-status">Belum ada permintaan.</span>
          </div>
          <div class="result-row">
            <span class="key">Protokol</span><span id="res-proto">-</span>
          </div>
          <div class="result-row">
            <span class="key">Server</span><span id="res-server">-</span>
          </div>
          <div class="result-row">
            <span class="key">Durasi</span><span id="res-days">-</span>
          </div>
          <div class="result-row">
            <span class="key">Perkiraan Harga</span><span id="res-price">Rp0</span>
          </div>
        </div>
        <textarea id="res-config" readonly>Config / detail akun akan muncul di sini (dummy). Nanti tinggal diganti dengan data dari backend.</textarea>
      </section>

      <section id="tab-topup" class="card" style="display:none;">
        <h2><span class="icon">üí≥</span> Top Up Saldo</h2>
        <p class="card-subtitle">
          Masukkan nominal top up, pilih dari quick button, lalu generate tagihan. Saat ini masih dummy design.
        </p>
        <div class="divider"></div>

        <div class="pill-row">
          <span class="pill pill-strong">QRIS / Payment Link</span>
          <span class="pill">Integrasi Pakasir / payment gateway nanti di-backend</span>
        </div>

        <div class="field">
          <label for="topup-amount">Nominal Top Up</label>
          <input id="topup-amount" type="number" placeholder="contoh: 20000" />
          <div class="topup-quick">
            <span class="topup-chip" data-amount="10000">10K</span>
            <span class="topup-chip" data-amount="25000">25K</span>
            <span class="topup-chip" data-amount="50000">50K</span>
            <span class="topup-chip" data-amount="100000">100K</span>
          </div>
          <div class="note">Minimal 5.000. Nanti nominal final bisa +kode unik dari sistem pembayaran.</div>
        </div>

        <div class="field">
          <label for="topup-user">User ID backend</label>
          <input id="topup-user" type="number" value="123456789" />
        </div>

        <button class="primary" id="btn-topup">
          üí≥ Buat Tagihan (Dummy)
        </button>

        <div id="topup-status" class="note"></div>

        <div class="divider"></div>
        <div class="result-header">
          <span>Detail Tagihan</span>
          <button class="copy-btn" id="btn-open-payment">Buka Link (Dummy)</button>
        </div>
        <div class="result-table">
          <div class="result-row">
            <span class="key">Status</span><span id="topup-res-status">Belum ada tagihan.</span>
          </div>
          <div class="result-row">
            <span class="key">Order ID</span><span id="topup-res-order">-</span>
          </div>
          <div class="result-row">
            <span class="key">Nominal</span><span id="topup-res-amount">Rp0</span>
          </div>
        </div>
        <img id="topup-qr" class="qr-preview" alt="QRIS Dummy" style="display:none;" />
      </section>

      <!-- KANAN: list server (dummy) -->
      <section class="card">
        <h2><span class="icon">üì°</span> Server Tersedia</h2>
        <p class="card-subtitle">
          Tap salah satu server untuk mengisi form di tab Akun. Data berikut masih dummy sebagai desain.
        </p>
        <div class="divider"></div>
        <div class="servers-grid" id="servers-grid">
          <!-- server cards by JS -->
        </div>
      </section>
    </div>
  </div>

  <footer>
    ExtrimerS Tunneling ‚Ä¢ Web Panel Design by You üî•
  </footer>

  <script>
    // === HELPER ===
    function rupiah(n) {
      const num = Number(n || 0);
      return "Rp" + num.toLocaleString("id-ID");
    }

    // === DUMMY DATA (DESAIN) ===
    const dummyUser = {
      id: 123456789,
      name: "extrimers01",
      saldo: 75000,
      role: "Reseller",
      level: "Gold"
    };

    const dummyStats = {
      orderCount: 42,
      orderSpent: 320000,
      topupCount: 10,
      topupAmount: 500000,
      serverCount: 6,
      serverAkun: 213
    };

    const dummyServers = [
      {
        id: 1,
        nama: "SG-1 Premium",
        lokasi: "Singapore",
        harga: 1500,
        quota: 30,
        iplimit: 2,
        used: 40,
        limit: 100,
        full: false
      },
      {
        id: 2,
        nama: "ID-1 Gaming",
        lokasi: "Indonesia - Jakarta",
        harga: 1200,
        quota: 25,
        iplimit: 2,
        used: 100,
        limit: 100,
        full: true
      },
      {
        id: 3,
        nama: "JP-1 Route",
        lokasi: "Japan - Tokyo",
        harga: 1700,
        quota: 40,
        iplimit: 3,
        used: 75,
        limit: 150,
        full: false
      }
    ];

    // === INIT USER & DASHBOARD ===
    const userAvatarEl = document.getElementById("user-avatar");
    const userNameEl = document.getElementById("user-name");
    const userSaldoEl = document.getElementById("user-saldo");
    const userRoleEl = document.getElementById("user-role");

    userAvatarEl.textContent = (dummyUser.name || "X").charAt(0).toUpperCase();
    userNameEl.textContent = dummyUser.name + " (" + dummyUser.id + ")";
    userSaldoEl.textContent = "Saldo: " + rupiah(dummyUser.saldo);
    userRoleEl.textContent = "Role: " + dummyUser.role + " ‚Ä¢ Level: " + dummyUser.level;

    document.getElementById("stat-order-count").textContent = dummyStats.orderCount;
    document.getElementById("stat-order-spent").textContent = rupiah(dummyStats.orderSpent);
    document.getElementById("stat-topup-count").textContent = dummyStats.topupCount;
    document.getElementById("stat-topup-amount").textContent = rupiah(dummyStats.topupAmount);
    document.getElementById("stat-server-count").textContent = dummyStats.serverCount;
    document.getElementById("stat-server-akun").textContent = dummyStats.serverAkun;

    // === SERVER LIST ===
    const serversGrid = document.getElementById("servers-grid");
    const serverSelect = document.getElementById("server-select");
    const serverSelectDefaultOpt = document.createElement("option");
    serverSelectDefaultOpt.value = "";
    serverSelectDefaultOpt.textContent = "Pilih server‚Ä¶";
    serverSelect.appendChild(serverSelectDefaultOpt);

    dummyServers.forEach((s) => {
      const card = document.createElement("div");
      card.className = "server-card";
      card.dataset.id = s.id;
      card.innerHTML = `
        <div class="server-name">${s.nama}</div>
        <div class="server-location">${s.lokasi}</div>
        <div class="server-meta">
          Harga / hari: <b>${rupiah(s.harga)}</b><br/>
          Kuota / hari: <b>${s.quota} GB</b><br/>
          IP Limit: <b>${s.iplimit}</b><br/>
          Akun: <b>${s.used}/${s.limit}</b>
        </div>
        <div class="server-status ${s.full ? "status-full" : "status-ok"}">
          ${s.full ? "‚ùå PENUH" : "‚úÖ Tersedia"}
        </div>
      `;
      card.addEventListener("click", () => {
        // pilih di dropdown
        serverSelect.value = s.id;
        // highlight
        document.querySelectorAll(".server-card").forEach(c => c.classList.remove("selected"));
        card.classList.add("selected");
      });
      serversGrid.appendChild(card);

      const opt = document.createElement("option");
      opt.value = s.id;
      opt.textContent = `${s.nama} (${s.lokasi})`;
      serverSelect.appendChild(opt);
    });

    // === TABS ===
    const tabButtons = document.querySelectorAll(".tab-btn");
    const tabDashboard = document.getElementById("tab-dashboard");
    const tabAkun = document.getElementById("tab-akun");
    const tabTopup = document.getElementById("tab-topup");

    function switchTab(name) {
      tabButtons.forEach(btn => btn.classList.toggle("active", btn.dataset.tab === name));
      tabDashboard.style.display = name === "dashboard" ? "block" : "none";
      tabAkun.style.display = name === "akun" ? "block" : "none";
      tabTopup.style.display = name === "topup" ? "block" : "none";
    }

    tabButtons.forEach(btn => {
      btn.addEventListener("click", () => switchTab(btn.dataset.tab));
    });

    // === PROTOCOL SWITCH ===
    let currentProto = "vmess";
    const protoButtons = document.querySelectorAll("#proto-row .proto-btn");
    const fieldPassword = document.getElementById("field-password");
    const resProto = document.getElementById("res-proto");

    function setProto(proto) {
      currentProto = proto;
      protoButtons.forEach(btn => btn.classList.toggle("active", btn.dataset.proto === proto));
      fieldPassword.style.display = proto === "ssh" ? "block" : "none";
      resProto.textContent = proto.toUpperCase();
    }
    protoButtons.forEach(btn => {
      btn.addEventListener("click", () => setProto(btn.dataset.proto));
    });
    setProto("vmess");

    // === ORDER (DUMMY) ===
    const btnCreate = document.getElementById("btn-create");
    const inpUserId = document.getElementById("user-id");
    const inpUsername = document.getElementById("username");
    const inpDays = document.getElementById("days");
    const resStatus = document.getElementById("res-status");
    const resServer = document.getElementById("res-server");
    const resDays = document.getElementById("res-days");
    const resPrice = document.getElementById("res-price");
    const resConfig = document.getElementById("res-config");

    btnCreate.addEventListener("click", () => {
      const serverId = serverSelect.value;
      const uname = (inpUsername.value || "").trim();
      const days = parseInt(inpDays.value, 10) || 0;
      const uid = inpUserId.value;

      if (!serverId) {
        resStatus.textContent = "Pilih server terlebih dahulu.";
        return;
      }
      if (!uname) {
        resStatus.textContent = "Username belum diisi.";
        return;
      }
      if (!uid) {
        resStatus.textContent = "User ID belum diisi.";
        return;
      }

      const server = dummyServers.find((s) => String(s.id) === String(serverId));
      const estPrice = server ? server.harga * days : 0;

      resStatus.textContent = "Berhasil (dummy).";
      resServer.textContent = server ? server.nama : "-";
      resDays.textContent = days + " hari";
      resPrice.textContent = rupiah(estPrice);
      resConfig.value =
`[DUMMY CONFIG]
User: ${uname}
Server: ${server ? server.nama : "-"}
Protokol: ${currentProto.toUpperCase()}
Durasi: ${days} hari
Estimasi harga: ${rupiah(estPrice)}

Nanti bagian ini diisi dengan config asli dari backend.`;
    });

    // === COPY CONFIG ===
    document.getElementById("btn-copy-config").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(resConfig.value || "");
        alert("Config dummy berhasil disalin. Nanti bisa diganti dengan config asli.");
      } catch {
        alert("Gagal menyalin config.");
      }
    });

    // === TOPUP (DUMMY) ===
    const topupAmount = document.getElementById("topup-amount");
    const topupUser = document.getElementById("topup-user");
    const topupBtn = document.getElementById("btn-topup");
    const topupStatus = document.getElementById("topup-status");
    const topupResStatus = document.getElementById("topup-res-status");
    const topupResOrder = document.getElementById("topup-res-order");
    const topupResAmount = document.getElementById("topup-res-amount");
    const topupQr = document.getElementById("topup-qr");
    const topupOpenBtn = document.getElementById("btn-open-payment");

    document.querySelectorAll(".topup-chip").forEach(chip => {
      chip.addEventListener("click", () => {
        topupAmount.value = chip.dataset.amount;
      });
    });

    topupBtn.addEventListener("click", () => {
      const amt = parseInt(topupAmount.value, 10) || 0;
      const uid = topupUser.value;
      if (!uid) {
        topupStatus.textContent = "User ID belum diisi.";
        topupStatus.className = "error";
        return;
      }
      if (amt < 5000) {
        topupStatus.textContent = "Minimal top up 5.000 (dummy).";
        topupStatus.className = "error";
        return;
      }

      const dummyOrderId = "WEB-" + Date.now();
      topupStatus.textContent = "Tagihan dummy dibuat. Nanti di sini akan ada status realtime dari payment gateway.";
      topupStatus.className = "success";
      topupResStatus.textContent = "Menunggu pembayaran (dummy)";
      topupResOrder.textContent = dummyOrderId;
      topupResAmount.textContent = rupiah(amt);

      // Tampilkan QR dummy (bisa diganti logo / image lain dulu)
      topupQr.src = "https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=" + encodeURIComponent("Order " + dummyOrderId + " - " + amt);
      topupQr.style.display = "block";

      topupOpenBtn.addEventListener("click", () => {
        alert("Nanti tombol ini bisa diarahkan ke payment_url dari backend.");
      });
    });

    // Default tab
    switchTab("dashboard");
  </script>
</body>
</html>
